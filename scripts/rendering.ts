import winston from "winston";

import features from '../index.js';

const logger = winston.createLogger({
    level: 'info',
    format: winston.format.printf(({level, message}) => `${message}`)
})

if (process.argv.includes("--quiet")) {
    logger.add(new winston.transports.Console({ level: 'info'}));
} else {
    logger.add(new winston.transports.Console({ level: 'verbose' }));
}

const burndown = [
    'aborting',
    'abs-sign',
    'accent-color',
    'anchor-positioning',
    'animation-composition',
    'appearance',
    'aspect-ratio',
    'autofill',
    'backdrop-filter',
    'background-clip-text',
    'background-gradients',
    'baseline-source',
    'blocking-render',
    'border-image',
    'breaking-controls',
    'calc-constants',
    'calc',
    'cap',
    'cascade-layers',
    'check-visibility',
    'clip-path',
    'color-function',
    'color-mix',
    'color-scheme',
    'colrv1',
    'complex-nth',
    'constraint-validation',
    'constructed-stylesheets',
    'contain-intrinsic-size',
    'contain-style',
    'contain',
    'container-queries',
    'container-style-queries',
    'content-visibility',
    'counter-style',
    'css-properties-values',
    'custom-elements',
    'custom-properties',
    'declarative-shadow-dom',
    'default',
    'details-name', // accordion
    'details',
    'dialog',
    'dir-function',
    'display-animation',
    'display-contents',
    'display-multiple',
    'exp-functions',
    'field-sizing',
    'flexbox-gap',
    'flexbox',
    'focus-visible',
    'font-face',
    'font-optical-sizing',
    'font-palette-animation',
    'font-palette',
    'font-size-adjust',
    'font-synthesis',
    'font-variant-alternates',
    'forms',
    'fullscreen',
    'grid-animation',
    'grid',
    'has',
    'hidden-until-found',
    'highlight',
    'ic',
    'image-set',
    'import-supports',
    'indeterminate',
    'individual-transforms',
    'interactive-widget',
    'intersection-observer',
    'is',
    'lab',
    'last-baseline',
    'lh',
    'light-dark',
    'line-clamp',
    'linear-easing',
    'margin-trim',
    'masonry',
    'media-query-nesting',
    'media-query-or-not', // here I come
    'media-query-range-syntax',
    'min-max-clamp',
    'motion-path',
    'named-pages',
    'nesting',
    'not',
    'oklab',
    'overflow-shorthand',
    'overlay',
    'overscroll',
    'popover',
    'prefers-color-scheme',
    'quotes',
    'read-write-pseudos',
    'registered-custom-properties',
    'relative-color',
    'revert',
    'root-font-units',
    'round-mod-rem',
    'scope',
    'scroll-driven-animations',
    'scroll-snap',
    'scrollbar-color',
    'scrollbar-gutter',
    'scrollbar-width',
    'scrollend',
    'search-input-type',
    'search',
    'shadow-dom',
    'show-picker-input',
    'show-picker-select',
    'slot',
    'spelling-grammar-error',
    'starting-style',
    'subgrid',
    'supports-selector',
    'template',
    'text-box-trim',
    'text-fragments',
    'text-indent',
    'text-spacing-trim',
    'text-wrap-balance',
    'text-wrap-pretty',
    'transforms2d',
    'transforms3d',
    'transition-behavior',
    'trig-functions',
    'user-pseudos',
    'view-transitions',
    'viewport-relative-unit-variants',
    'viewport-relative-units',
    'where',
];

for (const id of burndown) {
    const data = features[id];
    if (data) {
        logger.verbose(`- [${data.name.replaceAll('<', '&lt;')}](https://github.com/foolip/web-features/blob/rendering/feature-group-definitions/${id}.yml)`);
    } else {
        logger.verbose(`- ${id}`);
    }
}
